"use strict";(self.webpackChunkinterzone=self.webpackChunkinterzone||[]).push([[478],{65478:function(t,r,e){e.r(r),e.d(r,{Vote:function(){return v}});var n=e(29439),a=e(74165),s=e(15861),o=e(15671),c=e(43144),i=e(23001),u=e(4170),p=e(30853),h=e(2257),d=e(51583),l=e(19601),f=e(34029),v=(e(80518),e(84309),e(56509),e(88417),e(86789),e(3057),e(37078),e(20298),e(69645),e(16066),e(31938),e(54663),e(44954),e(11131),e(61390),e(21198),e(27992),e(23536),e(43230),e(71563),e(10618),e(17379),e(63225),e(24567),e(15154),e(80429),e(42279),e(6139),e(58665),e(2651),e(28579),e(29748),e(19627),e(77196),e(25058),e(96248),e(73726),e(58381),e(40284),e(69882),e(87515),e(23726),e(49195),e(3726),e(27672),e(22922),e(84255),e(98528),e(6254),e(18281),e(13250),e(13110),e(53422),e(20737),e(78262),e(47073),e(98289),e(14467),e(19316),e(45819),e(27253),e(29640),e(97203),e(66315),function(){function t(r,e,n){(0,o.Z)(this,t);var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4?arguments[4]:void 0,c=arguments.length>5?arguments[5]:void 0,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new u.cM(r,e,s,a);(0,i._)(this,"contractWrapper",void 0),(0,i._)(this,"storage",void 0),(0,i._)(this,"abi",void 0),(0,i._)(this,"metadata",void 0),(0,i._)(this,"encoder",void 0),(0,i._)(this,"estimator",void 0),(0,i._)(this,"events",void 0),(0,i._)(this,"interceptor",void 0),(0,i._)(this,"_chainId",void 0),this._chainId=c,this.abi=s,this.contractWrapper=p,this.storage=n,this.metadata=new u.am(this.contractWrapper,u.da,this.storage),this.encoder=new u.al(this.contractWrapper),this.estimator=new u.aW(this.contractWrapper),this.events=new u.aX(this.contractWrapper),this.interceptor=new u.aY(this.contractWrapper)}return(0,c.Z)(t,[{key:"chainId",get:function(){return this._chainId}},{key:"onNetworkUpdated",value:function(t){this.contractWrapper.updateSignerOrProvider(t)}},{key:"getAddress",value:function(){return this.contractWrapper.readContract.address}},{key:"get",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){var e,n;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getAll();case 2:if(e=t.sent,0!==(n=e.filter((function(t){return t.proposalId.eq(h.O$.from(r))}))).length){t.next=6;break}throw new Error("proposal not found");case 6:return t.abrupt("return",n[0]);case 7:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"getAll",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){var r=this;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Promise,t.next=3,this.contractWrapper.readContract.getAllProposals();case 3:return t.t1=t.sent.map(function(){var t=(0,s.Z)((0,a.Z)().mark((function t(e){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e.proposalId,t.t1=e.proposer,t.t2=e.description,t.t3=e.startBlock,t.t4=e.endBlock,t.next=7,r.contractWrapper.readContract.state(e.proposalId);case 7:return t.t5=t.sent,t.next=10,r.getProposalVotes(e.proposalId);case 10:return t.t6=t.sent,t.t7=e[3].map((function(t,r){return{toAddress:e.targets[r],nativeTokenValue:t,transactionData:e.calldatas[r]}})),t.abrupt("return",{proposalId:t.t0,proposer:t.t1,description:t.t2,startBlock:t.t3,endBlock:t.t4,state:t.t5,votes:t.t6,executions:t.t7});case 13:case"end":return t.stop()}}),t)})));return function(r){return t.apply(this,arguments)}}()),t.abrupt("return",t.t0.all.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getProposalVotes",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.readContract.proposalVotes(r);case 2:return e=t.sent,t.abrupt("return",[{type:u.b6.Against,label:"Against",count:e.againstVotes},{type:u.b6.For,label:"For",count:e.forVotes},{type:u.b6.Abstain,label:"Abstain",count:e.abstainVotes}]);case 4:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"hasVoted",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r,e){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=4;break}return t.next=3,this.contractWrapper.getSignerAddress();case 3:e=t.sent;case 4:return t.abrupt("return",this.contractWrapper.readContract.hasVoted(r,e));case 5:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"canExecute",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){var e,n,s,o,c;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureExists(r);case 2:return t.next=4,this.get(r);case 4:return e=t.sent,n=e.executions.map((function(t){return t.toAddress})),s=e.executions.map((function(t){return t.nativeTokenValue})),o=e.executions.map((function(t){return t.transactionData})),c=d.id(e.description),t.prev=9,t.next=12,this.contractWrapper.callStatic().execute(n,s,o,c);case 12:return t.abrupt("return",!0);case 15:return t.prev=15,t.t0=t.catch(9),t.abrupt("return",!1);case 18:case"end":return t.stop()}}),t,this,[[9,15]])})));return function(r){return t.apply(this,arguments)}}()},{key:"balance",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){var r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.contractWrapper.readContract.provider.getBalance(this.contractWrapper.readContract.address);case 2:return r=t.sent,t.abrupt("return",{name:"",symbol:"",decimals:18,value:r,displayValue:l.formatUnits(r,18)});case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"balanceOfToken",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){var e;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new f.CH(r,p,this.contractWrapper.getProvider()),t.t0=u.b8,t.t1=this.contractWrapper.getProvider(),t.t2=r,t.next=6,e.balanceOf(this.contractWrapper.readContract.address);case 6:return t.t3=t.sent,t.next=9,(0,t.t0)(t.t1,t.t2,t.t3);case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"ensureExists",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.contractWrapper.readContract.state(r);case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t.catch(0),Error("Proposal ".concat(r," not found"));case 8:case"end":return t.stop()}}),t,this,[[0,5]])})));return function(r){return t.apply(this,arguments)}}()},{key:"settings",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(){var r,e,s,o,c,i,p,h;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([this.contractWrapper.readContract.votingDelay(),this.contractWrapper.readContract.votingPeriod(),this.contractWrapper.readContract.token(),this.contractWrapper.readContract["quorumNumerator()"](),this.contractWrapper.readContract.proposalThreshold()]);case 2:return r=t.sent,e=(0,n.Z)(r,5),s=e[0],o=e[1],c=e[2],i=e[3],p=e[4],t.next=11,(0,u.b9)(this.contractWrapper.getProvider(),c);case 11:return h=t.sent,t.abrupt("return",{votingDelay:s.toString(),votingPeriod:o.toString(),votingTokenAddress:c,votingTokenMetadata:h,votingQuorumFraction:i.toString(),proposalTokenThreshold:p.toString()});case 13:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"propose",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r,e){var n,s,o,c,i;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e||(e=[{toAddress:this.contractWrapper.readContract.address,nativeTokenValue:0,transactionData:"0x"}]),n=e.map((function(t){return t.toAddress})),s=e.map((function(t){return t.nativeTokenValue})),o=e.map((function(t){return t.transactionData})),t.next=6,this.contractWrapper.sendTransaction("propose",[n,s,o,r]);case 6:return c=t.sent,i=this.contractWrapper.parseLogs("ProposalCreated",null===c||void 0===c?void 0:c.logs),t.abrupt("return",{id:i[0].args.proposalId,receipt:c});case 9:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"vote",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r,e){var n,s=arguments;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:"",t.next=3,this.ensureExists(r);case 3:return t.next=5,this.contractWrapper.sendTransaction("castVoteWithReason",[r,e,n]);case 5:return t.t0=t.sent,t.abrupt("return",{receipt:t.t0});case 7:case"end":return t.stop()}}),t,this)})));return function(r,e){return t.apply(this,arguments)}}()},{key:"execute",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){var e,n,s,o,c;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.ensureExists(r);case 2:return t.next=4,this.get(r);case 4:return e=t.sent,n=e.executions.map((function(t){return t.toAddress})),s=e.executions.map((function(t){return t.nativeTokenValue})),o=e.executions.map((function(t){return t.transactionData})),c=d.id(e.description),t.next=11,this.contractWrapper.sendTransaction("execute",[n,s,o,c]);case 11:return t.t0=t.sent,t.abrupt("return",{receipt:t.t0});case 13:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()},{key:"call",value:function(){var t=(0,s.Z)((0,a.Z)().mark((function t(r){var e,n,s,o,c=arguments;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=c.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=c[o];return t.abrupt("return",(e=this.contractWrapper).call.apply(e,[r].concat(s)));case 2:case"end":return t.stop()}}),t,this)})));return function(r){return t.apply(this,arguments)}}()}]),t}())}}]);
//# sourceMappingURL=478.2113461a.chunk.js.map