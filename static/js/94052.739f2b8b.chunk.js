"use strict";(self.webpackChunkinterzone=self.webpackChunkinterzone||[]).push([[94052],{94052:(n,o,e)=>{e.d(o,{onSessionProposal:()=>l});var i=e(4994),a=e(21225);async function l(n){var o;const{wallet:e,walletConnectClient:l,event:s,chains:t,onConnect:c}=n,d=e.getAccount();if(!d)throw new Error("No account connected to provided wallet");const r=null===(o=s.verifyContext)||void 0===o||null===(o=o.verified)||void 0===o?void 0:o.origin;r&&await async function(n){let{walletConnectClient:o,origin:e}=n;const l=await(0,a.S5)();for(const a of l)a.origin===e&&await(0,i.EF)({session:a,walletConnectClient:o})}({origin:r,walletConnectClient:l});const v=await async function(n){var o,e,i,a,l,s,t,c,d,r,v,p,u,m,w,C;let{account:h,walletConnectClient:f,sessionProposal:N,chains:g}=n;if((null===(o=N.params.requiredNamespaces)||void 0===o||!o.eip155)&&(null===(e=N.params.optionalNamespaces)||void 0===e||!e.eip155))throw new Error("No EIP155 namespace found in Wallet Connect session proposal");const k={chains:[...Array.from(new Set([...null!==(i=null===(a=N.params.requiredNamespaces)||void 0===a||null===(a=a.eip155)||void 0===a||null===(a=a.chains)||void 0===a?void 0:a.map((n=>"".concat(n,":").concat(h.address))))&&void 0!==i?i:[],...null!==(l=null===(s=N.params.optionalNamespaces)||void 0===s||null===(s=s.eip155)||void 0===s||null===(s=s.chains)||void 0===s?void 0:s.map((n=>"".concat(n,":").concat(h.address))))&&void 0!==l?l:[],...null!==(t=null===g||void 0===g?void 0:g.map((n=>"eip155:".concat(n.id,":").concat(h.address))))&&void 0!==t?t:[]]))],methods:[...null!==(c=null===(d=N.params.requiredNamespaces)||void 0===d||null===(d=d.eip155)||void 0===d?void 0:d.methods)&&void 0!==c?c:[],...null!==(r=null===(v=N.params.optionalNamespaces)||void 0===v||null===(v=v.eip155)||void 0===v?void 0:v.methods)&&void 0!==r?r:[]],events:[...null!==(p=null===(u=N.params.requiredNamespaces)||void 0===u||null===(u=u.eip155)||void 0===u?void 0:u.events)&&void 0!==p?p:[],...null!==(m=null===(w=N.params.optionalNamespaces)||void 0===w||null===(w=w.eip155)||void 0===w?void 0:w.events)&&void 0!==m?m:[]]},y=await f.approve({id:N.id,namespaces:{eip155:{accounts:k.chains,methods:k.methods,events:k.events}}}),E=await y.acknowledged();return{topic:E.topic,origin:(null===(C=N.verifyContext)||void 0===C||null===(C=C.verified)||void 0===C?void 0:C.origin)||"Unknown origin"}}({account:d,walletConnectClient:l,sessionProposal:s,chains:t});await(0,a.E1)(v),e.subscribe("disconnect",(()=>{(0,i.EF)({session:v,walletConnectClient:l})})),null===c||void 0===c||c(v)}}}]);
//# sourceMappingURL=94052.739f2b8b.chunk.js.map