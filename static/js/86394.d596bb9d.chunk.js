"use strict";(self.webpackChunkinterzone=self.webpackChunkinterzone||[]).push([[86394],{86394:(e,n,o)=>{o.d(n,{autoConnectWC:()=>z,connectWC:()=>J});var t=o(33998),r=o(21627),a=o(23512);r.C;r.C;class s extends r.C{constructor(e){let{body:n,error:o,url:t}=e;super("RPC Request failed.",{cause:o,details:o.message,metaMessages:["URL: ".concat(t),"Request body: ".concat((0,a.A)(n))],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=o.code}}r.C;r.C;class i extends r.C{constructor(e,n){let{code:o,docsPath:t,metaMessages:r,name:a,shortMessage:i}=n;super(i,{cause:e,docsPath:t,metaMessages:r||(null===e||void 0===e?void 0:e.metaMessages),name:a||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=a||e.name,this.code=e instanceof s?e.code:null!==o&&void 0!==o?o:-1}}class c extends i{constructor(e,n){super(e,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class d extends i{constructor(e){super(e,{code:d.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(d,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class l extends i{constructor(e){super(e,{code:l.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(l,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class u extends i{constructor(e){let{method:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,{code:u.code,name:"MethodNotFoundRpcError",shortMessage:"The method".concat(n?' "'.concat(n,'"'):""," does not exist / is not available.")})}}Object.defineProperty(u,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class p extends i{constructor(e){super(e,{code:p.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(p,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class h extends i{constructor(e){super(e,{code:h.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(h,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class v extends i{constructor(e){super(e,{code:v.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join("\n")})}}Object.defineProperty(v,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class m extends i{constructor(e){super(e,{code:m.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(m,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class b extends i{constructor(e){super(e,{code:b.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(b,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class g extends i{constructor(e){super(e,{code:g.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(g,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class f extends i{constructor(e){let{method:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,{code:f.code,name:"MethodNotSupportedRpcError",shortMessage:"Method".concat(n?' "'.concat(n,'"'):""," is not implemented.")})}}Object.defineProperty(f,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class w extends i{constructor(e){super(e,{code:w.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(w,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class y extends i{constructor(e){super(e,{code:y.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(y,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class C extends c{constructor(e){super(e,{code:C.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(C,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class M extends c{constructor(e){super(e,{code:M.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(M,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class P extends c{constructor(e){let{method:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,{code:P.code,name:"UnsupportedProviderMethodError",shortMessage:"The Provider does not support the requested method".concat(n?' " '.concat(n,'"'):"",".")})}}Object.defineProperty(P,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class E extends c{constructor(e){super(e,{code:E.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(E,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class O extends c{constructor(e){super(e,{code:O.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(O,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class R extends c{constructor(e){super(e,{code:R.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(R,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});var j=o(9893),I=o(83423),q=o(3340),T=o(93300),x=o(50967),N=o(85602),U=o(26711),_=o(49026),S=o(11177),D=o(55881),L=o(27334);const A="wallet_addEthereumChain",k=!0,Q={requestedChains:"tw.wc.requestedChains",lastUsedChainId:"tw.wc.lastUsedChainId"};async function J(e,n,o,t,r){const a=await F(e,o,r),s=e.walletConnect;let{onDisplayUri:i}=s||{};if(!i&&r&&"walletConnect"!==o){const e=await(0,U.u)(o);i=n=>{const o=e.mobile.native||e.mobile.universal;if(!o)throw new Error("No app url found for wallet connect to redirect to.");const t=(0,N.Y)(o,n).redirect;r(t)}}i&&a.events.addListener("display_uri",i);let c=null===s||void 0===s?void 0:s.optionalChains,d=e.chain;"global.safe"===o&&(c=W.map(j.Q4),d&&!c.includes(d)&&(d=void 0));const{rpcMap:l,chainsToRequest:u}=Y({client:e.client,chain:d,optionalChains:c});a.session&&await a.connect({...null!==s&&void 0!==s&&s.pairingTopic?{pairingTopic:null===s||void 0===s?void 0:s.pairingTopic}:{},optionalChains:u,chains:d?[d.id]:u.length>0?[u[0]]:[1],rpcMap:l}),H(u,t);const p=(await a.enable())[0];if(!p)throw new Error("No accounts found on provider.");const h=(0,D.A)(a.chainId),v=e.chain&&e.chain.id===h?e.chain:(0,j.Q4)(h);if(e){var m,b;const n={optionalChains:null===(m=e.walletConnect)||void 0===m?void 0:m.optionalChains,chain:e.chain,pairingTopic:null===(b=e.walletConnect)||void 0===b?void 0:b.pairingTopic};t&&(0,x.O7)(t,o,n)}return null!==s&&void 0!==s&&s.onDisplayUri&&a.events.removeListener("display_uri",s.onDisplayUri),V(p,v,a,n,t)}async function z(e,n,o,t,r){const a=t?await(0,x.lh)(t,o):null,s=await F(a?{chain:a.chain,client:e.client,walletConnect:{pairingTopic:a.pairingTopic,optionalChains:a.optionalChains}}:{client:e.client,walletConnect:{}},o,r,!0),i=s.accounts[0];if(!i)throw new Error("No accounts found on provider.");const c=(0,D.A)(s.chainId);return V(i,e.chain&&e.chain.id===c?e.chain:(0,j.Q4)(c),s,n,t)}async function F(e,n,t){var r,a,s,i;let c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const d=await(0,U.u)(n),l=e.walletConnect,{EthereumProvider:u,OPTIONAL_EVENTS:p,OPTIONAL_METHODS:h}=await o.e(80256).then(o.bind(o,80256));let v=null===l||void 0===l?void 0:l.optionalChains,m=e.chain;"global.safe"===n&&(v=W.map(j.Q4),m&&!v.includes(m)&&(m=void 0));const{rpcMap:b,chainsToRequest:g}=Y({client:e.client,chain:m,optionalChains:v}),f=await u.init({showQrModal:void 0===(null===l||void 0===l?void 0:l.showQrModal)?!t&&k:l.showQrModal,projectId:(null===l||void 0===l?void 0:l.projectId)||L.S,optionalMethods:h,optionalEvents:p,optionalChains:g,chains:m?[m.id]:g.length>0?[g[0]]:[1],metadata:{name:(null===l||void 0===l||null===(r=l.appMetadata)||void 0===r?void 0:r.name)||(0,S.o)().name,description:(null===l||void 0===l||null===(a=l.appMetadata)||void 0===a?void 0:a.description)||(0,S.o)().description,url:(null===l||void 0===l||null===(s=l.appMetadata)||void 0===s?void 0:s.url)||(0,S.o)().url,icons:[(null===l||void 0===l||null===(i=l.appMetadata)||void 0===i?void 0:i.logoUrl)||(0,S.o)().logoUrl]},rpcMap:b,qrModalOptions:null===l||void 0===l?void 0:l.qrModalOptions,disableProviderPing:!0});if(f.events.setMaxListeners(Number.POSITIVE_INFINITY),c||f.session&&await f.disconnect(),"walletConnect"!==n){function w(){var e;const n=(null===(e=f.session)||void 0===e||null===(e=e.peer)||void 0===e||null===(e=e.metadata)||void 0===e||null===(e=e.redirect)||void 0===e?void 0:e.native)||d.mobile.native||d.mobile.universal;t&&n&&t(n)}f.signer.client.on("session_request_sent",w),f.events.addListener("disconnect",(()=>{f.signer.client.off("session_request_sent",w)}))}return f}function K(e,n){return{address:(0,I.bv)(n),async sendTransaction(n){return{transactionHash:await e.request({method:"eth_sendTransaction",params:[{gas:n.gas?(0,q.cK)(n.gas):void 0,value:n.value?(0,q.cK)(n.value):void 0,from:this.address,to:n.to,data:n.data}]})}},async signMessage(n){let{message:o}=n;const t="string"===typeof o?(0,q.i3)(o):o.raw instanceof Uint8Array?(0,q.EY)(o.raw):o.raw;return e.request({method:"personal_sign",params:[t,this.address]})},async signTypedData(n){const o=(0,T.y)(n),{domain:r,message:a,primaryType:s}=o,i={EIP712Domain:(0,t.H4)({domain:r}),...o.types};(0,t.$$)({domain:r,message:a,primaryType:s,types:i});const c=(0,t.v8)({domain:null!==r&&void 0!==r?r:{},message:a,primaryType:s,types:i});return await e.request({method:"eth_signTypedData_v4",params:[this.address,c]})}}}function V(e,n,o,t,r){const a=K(o,e);async function s(){o.removeListener("accountsChanged",c),o.removeListener("chainChanged",d),o.removeListener("disconnect",i),await o.disconnect()}function i(){H([],r),null===r||void 0===r||r.removeItem(Q.lastUsedChainId),s(),t.emit("disconnect",void 0)}function c(e){if(e[0]){const n=K(o,(0,I.bv)(e[0]));t.emit("accountChanged",n),t.emit("accountsChanged",e)}else i()}function d(e){const n=(0,j.Q4)((0,D.A)(e));t.emit("chainChanged",n),null===r||void 0===r||r.setItem(Q.lastUsedChainId,String(e))}return o.on("accountsChanged",c),o.on("chainChanged",d),o.on("disconnect",i),o.on("session_delete",i),[a,n,s,e=>async function(e,n,o){const t=n.id;try{const s=function(e){var n;const o=null===(n=e.session)||void 0===n||null===(n=n.namespaces[L.C])||void 0===n||null===(n=n.chains)||void 0===n?void 0:n.map((e=>Number.parseInt(e.split(":")[1]||"")));return null!==o&&void 0!==o?o:[]}(e),i=function(e){var n;return(null===(n=e.session)||void 0===n||null===(n=n.namespaces[L.C])||void 0===n?void 0:n.methods)||[]}(e);if(!s.includes(t)&&i.includes(A)){var r,a;const s=await(0,j.PB)(n),i=[...new Set([...(null===(r=n.blockExplorers)||void 0===r?void 0:r.map((e=>e.url)))||[],...(null===(a=s.explorers)||void 0===a?void 0:a.map((e=>e.url)))||[]])];await e.request({method:A,params:[{chainId:(0,q.cK)(s.chainId),chainName:s.name,nativeCurrency:s.nativeCurrency,rpcUrls:(0,_.k)(s),blockExplorerUrls:i.length>0?i:void 0}]});const c=await async function(e){const n=await e.getItem(Q.requestedChains);return n?JSON.parse(n):[]}(o);c.push(t),H(c,o)}await e.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,q.cK)(t)}]})}catch(s){const e="string"===typeof s?s:null===s||void 0===s?void 0:s.message;if(/user rejected request/i.test(e))throw new C(s);throw new R(s)}}(o,e,r)]}function H(e,n){null===n||void 0===n||n.setItem(Q.requestedChains,JSON.stringify(e))}function Y(e){const n={};e.chain&&(n[e.chain.id]=(0,j.r8)({chain:e.chain,client:e.client}));const o=((null===e||void 0===e?void 0:e.optionalChains)||[]).slice(0,10);for(const a of o)n[a.id]=(0,j.r8)({chain:a,client:e.client});const t=o.map((e=>e.id))||[],r=e.chain?[e.chain.id,...t]:t.length>0?t:[1];return e.chain||0!==o.length||(n[1]=(0,j.Q4)(1).rpc),{rpcMap:n,chainsToRequest:r}}const W=[1,11155111,42161,43114,8453,1313161554,84532,56,42220,100,10,137,1101,324,534352]}}]);
//# sourceMappingURL=86394.d596bb9d.chunk.js.map