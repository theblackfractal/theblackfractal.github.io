"use strict";(self.webpackChunkinterzone=self.webpackChunkinterzone||[]).push([[76471,8576,3355],{79578:(e,t,n)=>{n.d(t,{rr:()=>a});var o=n(86511);const i="0x313ce567",s=[],r=[{type:"uint8"}];async function a(e){return(0,o.readContract)({contract:e.contract,method:[i,s,r],params:[]})}},8576:(e,t,n)=>{n.d(t,{decimals:()=>s});var o=n(27059),i=n(79578);async function s(e){return(0,o.n)((()=>(0,i.rr)(e)),{cacheKey:"".concat(e.contract.chain.id,":").concat(e.contract.address,":decimals"),cacheTime:Number.POSITIVE_INFINITY})}},3355:(e,t,n)=>{n.d(t,{getCurrencyMetadata:()=>p});var o=n(28887),i=n(27059),s=n(86511);const r="0x06fdde03",a=[],c=[{type:"string"}];async function l(e){return(0,i.n)((()=>async function(e){return(0,s.readContract)({contract:e.contract,method:[r,a,c],params:[]})}(e)),{cacheKey:"".concat(e.contract.chain.id,":").concat(e.contract.address,":name"),cacheTime:Number.POSITIVE_INFINITY})}const d="0x95d89b41",u=[],h=[{type:"string"}];async function m(e){return(0,i.n)((()=>async function(e){return(0,s.readContract)({contract:e.contract,method:[d,u,h],params:[]})}(e)),{cacheKey:"".concat(e.contract.chain.id,":").concat(e.contract.address,":symbol"),cacheTime:Number.POSITIVE_INFINITY})}var x=n(79578);async function p(e){if((0,o.dw)(e.contract.address))return{name:"Ether",symbol:"ETH",decimals:18,...e.contract.chain.nativeCurrency};try{const[t,n,o]=await Promise.all([l(e).catch((()=>"")),m(e),(0,x.rr)(e)]);return{name:t,symbol:n,decimals:o}}catch(t){throw new Error("Invalid currency token")}}},76471:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ft});var o=n(70579),i=n(90852),s=n(65043),r=n(28887),a=n(83423);function c(e){const t=e.toToken.chainId===e.onRampToken.token.chainId,n=(0,a.bv)(e.toToken.tokenAddress)===(0,a.bv)(e.onRampToken.token.tokenAddress);return!(t&&n)}var l=n(55397),d=n(73310),u=n(70012),h=n(12265),m=n(89516);var x=n(49703),p=n(39680);function y(e,t){return(0,h.I)({...t,queryKey:["useBuyWithFiatQuote",e],queryFn:async()=>{if(!e)throw new Error("No params provided");return async function(e){try{const t=(0,x.KI)(e.client),n=await t((0,p._5)(),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({toAddress:e.toAddress,fromCurrencySymbol:e.fromCurrencySymbol,toChainId:e.toChainId.toString(),toTokenAddress:e.toTokenAddress,fromAmount:e.fromAmount,toAmount:e.toAmount,maxSlippageBPS:e.maxSlippageBPS,isTestMode:e.isTestMode,purchaseData:e.purchaseData,fromAddress:e.fromAddress,toGasAmountWei:e.toGasAmountWei})});if(!n.ok){const e=await n.json();if(e&&"error"in e)throw e;throw new Error("HTTP error! status: ".concat(n.status))}return(await n.json()).result}catch(t){throw console.error("Error getting buy with fiat quote",t),t}}(e)},enabled:!!e,retry(e,t){if(e>3)return!1;try{if("MINIMUM_PURCHASE_AMOUNT"===t.error.code)return!1}catch{return!0}return!0}})}var f,j=n(41679),v=n(43571),g=n(2038),w=n(57528),b=n(83290),k=n(56703),C=n(83609),T=n(58911),S=n(99606),E=n(43300),A=n(14494),R=n(34153);const z=(0,s.forwardRef)((function(e,t){return(0,o.jsx)(W,{ref:t,children:(0,o.jsx)(S.X,{children:(0,o.jsxs)(A.mc,{p:"lg",children:[(0,o.jsx)(E.w,{children:(0,o.jsx)(R.K0,{type:"button","aria-label":"Close",onClick:e.close,children:(0,o.jsx)(i.MKb,{width:d.RK.md,height:d.RK.md,style:{color:"inherit"}})})}),e.children]})})})})),W=(0,T.jx)((e=>{const t=(0,k.QP)();return{zIndex:1e4,borderTopLeftRadius:d.r8.xl,borderTopRightRadius:d.r8.xl,background:t.colors.modalBg,position:"absolute",bottom:0,left:0,right:0,animation:"".concat(B," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.1)"),borderTop:"1px solid ".concat(t.colors.borderColor)}})),B=(0,b.i7)(f||(f=(0,w.A)(["\n  from {\n    opacity: 0;\n    transform: translateY(100px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n"]))),I=(0,T.jx)((e=>({backgroundColor:(0,k.QP)().colors.modalOverlayBg,zIndex:9999,position:"absolute",inset:0,animation:"".concat(C.I0," 400ms cubic-bezier(0.16, 1, 0.3, 1)")})));function O(){const[e,t]=(0,s.useState)(!1),n=(0,s.useRef)(null),o=(0,s.useRef)(null),i=(0,s.useCallback)((()=>new Promise((e=>{if(n.current){var t;const i={easing:"cubic-bezier(0.175, 0.885, 0.32, 1.1)",fill:"forwards",duration:300},s=n.current.animate([{transform:"translateY(100%)",opacity:0}],i);null===(t=o.current)||void 0===t||t.animate([{opacity:0}],i),s.onfinish=()=>e()}else e()}))),[]),r=(0,s.useCallback)((async e=>{e?t(!0):(await i(),t(!1))}),[i]);return(0,s.useLayoutEffect)((()=>{if(!e)return;const t=e=>{n.current&&e.target instanceof Node&&!n.current.contains(e.target)&&r(!1)};return requestAnimationFrame((()=>{document.addEventListener("click",t)})),()=>{document.removeEventListener("click",t)}}),[e,r]),{drawerRef:n,drawerOverlayRef:o,setIsOpen:r,isOpen:e}}var F=n(4230),D=n(5961),P=n(97138),K=n(46025),L=n(67991),M=n(55138),N=n(31476),q=n(88957),_=n(88760),H=n(48971),Y=n(38437),U=n(38736),V=n(8576),G=n(99108),Q=n(64185),$=n(57855),Z=n(37529),J=n(13776),X=n(35739),ee=n(58572),te=n(4242);function ne(e){var t,n,i,s,c;const{payUiOptions:u,supportedDestinations:m,client:x,onContinue:p,payerAccount:y}=e,f=(0,k.QP)(),j=(0,$.z)(),g=u.metadata,w=u.paymentInfo,{data:b}=(0,Q.cj)(w.chain),{data:C}=(0,Z.vq)({client:x,address:w.sellerAddress}),T=(0,h.I)({queryKey:["amount",w],queryFn:async()=>{let e,t=18;return w.token&&!(0,Y.r)(w.token)&&(t=await(0,V.decimals)({contract:(0,U.P)({address:w.token.address,chain:w.chain,client:x})})),e="amountWei"in w?(0,G.ow)(w.amountWei,t):w.amount,e}}).data;if(!b||void 0===T)return(0,o.jsx)(v.x,{});const S=w.token?{...w.token,icon:(null===(t=w.token)||void 0===t?void 0:t.icon)||(null===(n=m.find((e=>e.chain.id===w.chain.id)))||void 0===n||null===(n=n.tokens.find((e=>{var t;return e.address.toLowerCase()===(null===(t=w.token)||void 0===t?void 0:t.address.toLowerCase())})))||void 0===n?void 0:n.icon)}:{address:r.DG,name:b.nativeCurrency.name,symbol:b.nativeCurrency.symbol,icon:null===(i=b.icon)||void 0===i?void 0:i.url};return(0,o.jsxs)(A.mc,{p:"lg",children:[(0,o.jsx)(A.rQ,{title:(null===g||void 0===g?void 0:g.name)||"Payment Details"}),(0,o.jsx)(F.h,{y:"lg"}),(0,o.jsxs)(A.mc,{children:[null!==g&&void 0!==g&&g.image?(0,o.jsx)(X.E,{client:x,src:null===g||void 0===g?void 0:g.image,style:{width:"100%",borderRadius:d.YK.md,backgroundColor:f.colors.tertiaryBg}}):j?(0,o.jsxs)(A.mc,{flex:"row",center:"both",style:{padding:d.YK.md,marginBottom:d.YK.md,borderRadius:d.YK.md,backgroundColor:f.colors.tertiaryBg},children:[(0,o.jsx)(te.j,{size:d.RK.xl,id:j.id,client:x}),(0,o.jsx)("div",{style:{flexGrow:1,borderBottom:"6px dotted",borderColor:f.colors.secondaryIconColor,marginLeft:d.YK.md,marginRight:d.YK.md}}),(0,o.jsx)(J.P,{client:x,size:d.RK.xl,chainIconUrl:null===(s=b.icon)||void 0===s?void 0:s.url})]}):null,(0,o.jsx)(F.h,{y:"md"}),(0,o.jsxs)(A.mc,{flex:"row",children:[(0,o.jsx)(A.mc,{flex:"column",expand:!0,children:(0,o.jsx)(K.E,{size:"md",color:"primaryText",weight:700,children:"Price"})}),(0,o.jsx)(A.mc,{expand:!0,children:(0,o.jsxs)(A.mc,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:[(0,o.jsx)(ee.x,{chain:w.chain,client:e.client,size:"sm",token:S}),(0,o.jsxs)(K.E,{color:"primaryText",size:"md",weight:700,children:[String((0,l.Z)(Number(T),6))," ",S.symbol]})]})})]}),(0,o.jsx)(F.h,{y:"md"}),(0,o.jsx)(A.N1,{}),(0,o.jsx)(F.h,{y:"md"}),(0,o.jsxs)(A.mc,{flex:"row",children:[(0,o.jsx)(A.mc,{flex:"column",expand:!0,children:(0,o.jsx)(K.E,{size:"xs",color:"secondaryText",children:"Network"})}),(0,o.jsx)(A.mc,{expand:!0,children:(0,o.jsxs)(A.mc,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:[(0,o.jsx)(J.P,{chainIconUrl:null===(c=b.icon)||void 0===c?void 0:c.url,size:"xs",client:e.client}),(0,o.jsx)(K.E,{size:"xs",color:"secondaryText",style:{textAlign:"right"},children:b.name})]})})]}),(0,o.jsx)(F.h,{y:"sm"}),(0,o.jsxs)(A.mc,{flex:"row",children:[(0,o.jsx)(A.mc,{flex:"column",expand:!0,children:(0,o.jsx)(K.E,{size:"xs",color:"secondaryText",children:"Seller"})}),(0,o.jsx)(A.mc,{expand:!0,children:(0,o.jsx)(A.mc,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:(0,o.jsx)(K.E,{size:"xs",color:"secondaryText",style:{textAlign:"right"},children:C||(0,a.Wr)(w.sellerAddress)})})})]})]}),(0,o.jsx)(F.h,{y:"xl"}),y?(0,o.jsx)(R.$n,{variant:"accent",fullWidth:!0,onClick:()=>{p(T,w.chain,S)},children:"Choose Payment Method"}):(0,o.jsx)("div",{children:(0,o.jsx)(M.p,{...e.connectOptions,client:x,theme:f,connectButton:{style:{width:"100%"}}})})]})}var oe=n(21969),ie=n(53436);function se(e){const{estimatedSeconds:t,quoteIsLoading:n}=e;return(0,o.jsxs)(A.mc,{bg:"tertiaryBg",flex:"row",borderColor:"borderColor",style:{borderRadius:d.r8.md,borderTopLeftRadius:0,borderTopRightRadius:0,justifyContent:"space-between",alignItems:"center",borderWidth:"1px",borderStyle:"solid"},children:[(0,o.jsxs)(A.mc,{flex:"row",center:"y",gap:"xxs",color:"accentText",p:"sm",children:[(0,o.jsx)(i.O4,{width:d.RK.sm,height:d.RK.sm}),n?(0,o.jsx)(oe.E,{height:d.J.xs,width:"50px",color:"borderColor"}):(0,o.jsx)(K.E,{size:"xs",color:"secondaryText",children:void 0!==t?"~".concat((0,ie.X)(t)):"--"})]}),(0,o.jsxs)(R.$n,{variant:"ghost",onClick:e.onViewFees,gap:"xs",children:[(0,o.jsx)(A.mc,{color:"accentText",flex:"row",center:"both",children:(0,o.jsx)(re,{size:d.RK.sm})}),(0,o.jsx)(K.E,{size:"xs",color:"secondaryText",children:"View Fees"})]})]})}const re=e=>(0,o.jsxs)("svg",{width:e.size,height:e.size,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",children:[(0,o.jsx)("path",{d:"M9.5 1.5H2.5C1.94772 1.5 1.5 1.94772 1.5 2.5V9.5C1.5 10.0523 1.94772 10.5 2.5 10.5H9.5C10.0523 10.5 10.5 10.0523 10.5 9.5V2.5C10.5 1.94772 10.0523 1.5 9.5 1.5Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M4.5 7.5L7.5 4.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]});var ae=n(59350),ce=n(65458);function le(e){return(0,o.jsxs)(A.mc,{bg:"tertiaryBg",borderColor:"borderColor",flex:"row",style:{borderRadius:d.r8.md,borderBottomRightRadius:0,borderBottomLeftRadius:0,borderWidth:"1px",borderStyle:"solid",borderBottom:"none",flexWrap:"nowrap",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)(de,{variant:"ghost",onClick:e.onSelectCurrency,style:{minHeight:"64px",justifyContent:"flex-start",minWidth:"50%"},gap:"sm",children:[(0,o.jsx)(e.currency.icon,{size:d.RK.md}),(0,o.jsxs)(A.mc,{flex:"row",center:"y",gap:"xxs",color:"secondaryText",children:[(0,o.jsx)(K.E,{color:"primaryText",children:e.currency.shorthand}),(0,o.jsx)(i.D3D,{width:d.RK.sm,height:d.RK.sm})]})]}),(0,o.jsx)("div",{style:{flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",alignItems:"flex-end",gap:d.YK.xxs,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",justifyContent:"center",paddingRight:d.YK.sm},children:e.isLoading?(0,o.jsx)(oe.E,{width:"100px",height:d.J.lg}):(0,o.jsx)(K.E,{size:"lg",color:e.value?"primaryText":"secondaryText",children:e.value?"".concat((0,l.Z)(Number(e.value),6)):"--"})})]})}const de=(0,ce.A)(R.$n)((()=>({"&[disabled]:hover":{borderColor:"transparent"}})));var ue=n(9893),he=n(3355),me=n(39598),xe=n(79002);const pe=(0,ue.xH)({id:84532,name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},blockExplorers:[{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}],testnet:!0}),ye=(0,ue.xH)({id:8453,name:"Base",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorers:[{name:"Basescan",url:"https://basescan.org",apiUrl:"https://api.basescan.org/api"}]}),fe=(0,ue.xH)({id:11155420,name:"OP Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},blockExplorers:[{name:"Blockscout",url:"https://optimism-sepolia.blockscout.com",apiUrl:"https://optimism-sepolia.blockscout.com/api"}],testnet:!0}),je=(0,ue.xH)({id:10,name:"OP Mainnet",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},blockExplorers:[{name:"Optimism Explorer",url:"https://optimistic.etherscan.io",apiUrl:"https://api-optimistic.etherscan.io"}]}),ve=(0,ue.xH)({id:999999999,name:"Zora Sepolia",nativeCurrency:{decimals:18,name:"Zora Sepolia",symbol:"ETH"},blockExplorers:[{name:"Zora Sepolia Explorer",url:"https://sepolia.explorer.zora.energy/",apiUrl:"https://sepolia.explorer.zora.energy/api"}],testnet:!0}),ge=(0,ue.xH)({id:7777777,name:"Zora",nativeCurrency:{decimals:18,name:"Ether",symbol:"ETH"},blockExplorers:[{name:"Explorer",url:"https://explorer.zora.energy",apiUrl:"https://explorer.zora.energy/api"}]}),we=[ye.id,pe.id,je.id,fe.id,ge.id,ve.id,34443,919,42220,44787,204,5611];var be=n(46325),ke=n(84613);async function Ce(e){var t,o,i;const{transaction:s}=e,r=null!==(t=null!==(o=e.from)&&void 0!==o?o:null===(i=e.account)||void 0===i?void 0:i.address)&&void 0!==t?t:void 0,a=await(0,be.r)(s.gas)||await(0,ke.Q)({transaction:s,from:r}),c=await(0,me.L)({client:s.client,chain:s.chain});let l;if(d=s.chain,we.includes(d.id)){const{estimateL1Fee:e}=await n.e(78099).then(n.bind(n,78099));l=await e({transaction:s})}else l=0n;var d;const u=a*c+l;return{ether:(0,G.Ce)(u),wei:u}}var Te=n(3791);async function Se(e,t){try{const n=await Ce({transaction:e,from:t}),o=n.wei/10n;return n.wei+o}catch(n){if(t)return await Se(e);return 2000000n*await(0,me.L)({client:e.client,chain:e.chain})}}function Ee(e){var t,n;const{payUiOptions:i,client:a,payerAccount:c,supportedDestinations:u,onContinue:m}=e,{data:x}=(0,Q.cj)(i.transaction.chain),p=i.metadata,{data:y}=function(e){const{transaction:t,account:n,supportedDestinations:o}=e,[i,a]=(0,s.useState)();return(0,s.useEffect)((()=>{Promise.all([(0,be.r)(t.value),(0,be.r)(t.erc20Value),(0,be.r)(t.to),(0,xe.encode)(t)]).then((e=>{var t;let[n,o,i,s]=e;a({value:null===n||void 0===n?void 0:n.toString(),erc20Value:null===o||void 0===o||null===(t=o.amountWei)||void 0===t?void 0:t.toString(),erc20Currency:null===o||void 0===o?void 0:o.tokenAddress,to:i,data:s})}))}),[t]),(0,h.I)({queryKey:["transaction-cost",t.chain.id,null===n||void 0===n?void 0:n.address,i],queryFn:async()=>{var e;if(!n)throw new Error("No account");const i=await(0,be.r)(t.erc20Value);if(i){var s;const[e,r,a]=await Promise.all([(0,Te.m)({address:n.address,chain:t.chain,client:t.client,tokenAddress:i.tokenAddress}),(0,he.getCurrencyMetadata)({contract:(0,U.P)({address:i.tokenAddress,chain:t.chain,client:t.client})}),Se(t,null===n||void 0===n?void 0:n.address)]),c=i.amountWei,l=e;return{token:{address:i.tokenAddress,name:r.name,symbol:r.symbol,icon:null===(s=o.find((e=>e.chain.id===t.chain.id)))||void 0===s||null===(s=s.tokens.find((e=>e.address.toLowerCase()===i.tokenAddress.toLowerCase())))||void 0===s?void 0:s.icon},decimals:r.decimals,walletBalance:l,gasCostWei:a,transactionValueWei:c}}const[a,c,l]=await Promise.all([(0,Te.m)({address:n.address,chain:t.chain,client:t.client}),(0,ue.PB)(t.chain),Se(t,null===n||void 0===n?void 0:n.address)]),d=a,u=await(0,be.r)(t.value)||0n;return{token:{address:r.DG,name:c.nativeCurrency.name,symbol:c.nativeCurrency.symbol,icon:null===(e=c.icon)||void 0===e?void 0:e.url},decimals:18,walletBalance:d,gasCostWei:l,transactionValueWei:u}},enabled:!!t&&!!n&&!!i,refetchInterval:()=>{if(!t.erc20Value)return 3e4}})}({transaction:i.transaction,account:c,supportedDestinations:u}),f=(0,k.QP)(),j=(0,$.z)(),g=(0,Z.UH)(j);return y&&x?(0,o.jsxs)(A.mc,{p:"lg",children:[(0,o.jsx)(A.rQ,{title:(null===p||void 0===p?void 0:p.name)||"Transaction"}),(0,o.jsx)(F.h,{y:"lg"}),(0,o.jsxs)(A.mc,{children:[null!==p&&void 0!==p&&p.image?(0,o.jsx)(X.E,{client:a,src:null===p||void 0===p?void 0:p.image,style:{width:"100%",borderRadius:d.YK.md,backgroundColor:f.colors.tertiaryBg}}):j?(0,o.jsxs)(A.mc,{flex:"row",center:"both",style:{padding:d.YK.md,marginBottom:d.YK.md,borderRadius:d.YK.md,backgroundColor:f.colors.tertiaryBg},children:[(0,o.jsx)(te.j,{size:d.RK.xl,id:j.id,client:a}),(0,o.jsx)("div",{style:{flexGrow:1,borderBottom:"6px dotted",borderColor:f.colors.secondaryIconColor,marginLeft:d.YK.md,marginRight:d.YK.md}}),(0,o.jsx)(J.P,{client:a,size:d.RK.xl,chainIconUrl:null===(t=x.icon)||void 0===t?void 0:t.url})]}):null,(0,o.jsx)(F.h,{y:"md"}),(0,o.jsxs)(A.mc,{flex:"row",children:[(0,o.jsx)(A.mc,{flex:"column",expand:!0,children:(0,o.jsx)(K.E,{size:"md",color:"primaryText",weight:700,children:"Price"})}),(0,o.jsx)(A.mc,{expand:!0,children:(0,o.jsxs)(A.mc,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:[(0,o.jsx)(ee.x,{chain:i.transaction.chain,client:e.client,size:"sm",token:y.token}),(0,o.jsxs)(K.E,{color:"primaryText",size:"md",weight:700,children:[String((0,l.Z)(Number((0,G.ow)(y.transactionValueWei,y.decimals)),6))," ",y.token.symbol]})]})})]}),(0,o.jsx)(F.h,{y:"md"}),(0,o.jsx)(A.N1,{}),(0,o.jsx)(F.h,{y:"md"}),(0,o.jsxs)(A.mc,{flex:"row",children:[(0,o.jsx)(A.mc,{flex:"column",expand:!0,children:(0,o.jsx)(K.E,{size:"xs",color:"secondaryText",children:"Gas Fees"})}),(0,o.jsx)(A.mc,{expand:!0,children:(0,o.jsx)(A.mc,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:(0,o.jsx)(K.E,{color:g?"success":"primaryText",size:"xs",children:g?"Sponsored":"".concat(String((0,l.Z)(Number((0,G.ow)(y.gasCostWei,x.nativeCurrency.decimals)),6))," ").concat(x.nativeCurrency.symbol)})})})]}),(0,o.jsx)(F.h,{y:"sm"}),(0,o.jsxs)(A.mc,{flex:"row",children:[(0,o.jsx)(A.mc,{flex:"column",expand:!0,children:(0,o.jsx)(K.E,{size:"xs",color:"secondaryText",children:"Network"})}),(0,o.jsx)(A.mc,{expand:!0,children:(0,o.jsxs)(A.mc,{flex:"row",gap:"xs",center:"y",style:{justifyContent:"right"},children:[(0,o.jsx)(J.P,{chainIconUrl:null===(n=x.icon)||void 0===n?void 0:n.url,size:"xs",client:e.client}),(0,o.jsx)(K.E,{size:"xs",color:"secondaryText",style:{textAlign:"right"},children:x.name})]})})]})]}),(0,o.jsx)(F.h,{y:"xl"}),c?(0,o.jsx)(R.$n,{variant:"accent",fullWidth:!0,onClick:()=>{let e=y.transactionValueWei;y.token.address!==r.DG||g||(e+=y.gasCostWei),m((0,G.ow)(e,y.decimals),i.transaction.chain,y.token)},children:"Choose Payment Method"}):(0,o.jsx)("div",{children:(0,o.jsx)(M.p,{...e.connectOptions,client:a,theme:f,connectButton:{style:{width:"100%"}}})})]}):(0,o.jsx)(v.x,{})}var Ae=n(12087);function Re(e){const t=(0,k.QP)();return(0,o.jsx)(A.mc,{bg:"tertiaryBg",style:{borderRadius:d.r8.lg,border:"1px solid ".concat(t.colors.borderColor),...e.containerStyle},children:(0,o.jsxs)(R.$n,{fullWidth:!0,disabled:e.disabled,onClick:e.onClick,variant:"ghost",style:{justifyContent:"space-between",padding:d.YK.sm,backgroundColor:t.colors.tertiaryBg},gap:"sm",children:[(0,o.jsx)(ze,{client:e.client,address:e.address}),!e.disableChevron&&(0,o.jsx)(i.D3D,{width:d.RK.sm,height:d.RK.sm,style:{color:t.colors.secondaryText}}),e.checked&&(0,o.jsx)(i.Srz,{width:d.RK.md,height:d.RK.md})]})})}function ze(e){const{client:t,address:n}=e,i=(0,Ae.F)().find((t=>{var n;return(null===(n=t.getAccount())||void 0===n?void 0:n.address)===e.address})),s=e.walletId||(null===i||void 0===i?void 0:i.id),r=(0,Z.vq)({client:t,address:n}),c=r.data||(0,a.Wr)(n),l=(0,Z.$$)({client:t,ensName:r.data});return(0,o.jsxs)(A.mc,{flex:"row",center:"y",gap:"sm",color:"secondaryText",children:[l.data?(0,o.jsx)(X.E,{src:l.data,width:d.RK.md,height:d.RK.md,style:{borderRadius:d.r8.sm},client:e.client}):s?(0,o.jsx)(te.j,{id:s,size:d.RK.md,client:e.client}):null,(0,o.jsx)(K.E,{size:"sm",color:"primaryText",children:c||(0,a.Wr)(e.address)})]})}var We=n(49935);function Be(e){return(0,o.jsxs)(A.mc,{children:[(0,o.jsx)(A.mc,{p:"lg",children:(0,o.jsx)(A.rQ,{title:"Pay with",onBack:e.onBack})}),(0,o.jsx)(A.N1,{}),(0,o.jsx)(F.h,{y:"lg"}),(0,o.jsx)(A.mc,{flex:"column",gap:"xs",px:"lg",children:We.qx.map((t=>(0,o.jsxs)(Ie,{fullWidth:!0,variant:"secondary",onClick:()=>e.onSelect(t),gap:"sm",children:[(0,o.jsx)(t.icon,{size:d.RK.lg}),(0,o.jsxs)(A.mc,{flex:"column",gap:"xxs",children:[(0,o.jsx)(K.E,{color:"primaryText",children:t.shorthand}),(0,o.jsx)(K.E,{size:"sm",children:t.name})]})]},t.shorthand)))}),(0,o.jsx)(F.h,{y:"lg"})]})}const Ie=(0,ce.A)(R.$n)((()=>{const e=(0,k.QP)();return{background:e.colors.tertiaryBg,justifyContent:"flex-start",gap:d.YK.sm,padding:d.YK.sm,"&:hover":{background:e.colors.secondaryButtonBg,transform:"scale(1.01)"},transition:"background 200ms ease, transform 150ms ease"}}));var Oe=n(95669);function Fe(e,t){const n=(window.innerHeight-750)/2,o=(window.innerWidth-500)/2;return window.open("".concat(e,"&theme=").concat(t),"thirdweb Pay","width=".concat(500,", height=").concat(750,", top=").concat(n,", left=").concat(o))}var De=n(63752),Pe=n(63248),Ke=n(73650),Le=n(14956),Me=n(85892),Ne=n(84735),qe=n(50503),_e=n(41880),He=n(40497);function Ye(e){var t,n,i,r;const a=(0,Pe.jE)(),{openedWindow:c,onSuccess:l}=e,d=(0,Le.a)({intentId:e.intentId,client:e.client});let u="loading";"ON_RAMP_TRANSFER_FAILED"===(null===(t=d.data)||void 0===t?void 0:t.status)||"PAYMENT_FAILED"===(null===(n=d.data)||void 0===n?void 0:n.status)?u="failed":"CRYPTO_SWAP_FALLBACK"===(null===(i=d.data)||void 0===i?void 0:i.status)?u="partialSuccess":"ON_RAMP_TRANSFER_COMPLETED"===(null===(r=d.data)||void 0===r?void 0:r.status)&&(u="completed");const h=(0,s.useRef)(!1);(0,s.useEffect)((()=>{var e;!h.current&&l&&"ON_RAMP_TRANSFER_COMPLETED"===(null===(e=d.data)||void 0===e?void 0:e.status)&&(h.current=!0,l(d.data))}),[l,d.data]),(0,s.useEffect)((()=>{var e,t;c&&d.data&&("CRYPTO_SWAP_REQUIRED"!==(null===(e=d.data)||void 0===e?void 0:e.status)&&"ON_RAMP_TRANSFER_COMPLETED"!==(null===(t=d.data)||void 0===t?void 0:t.status)||c.close())}),[d.data,c]);const m=(0,s.useRef)(!1);return(0,s.useEffect)((()=>{var e;m.current||"ON_RAMP_TRANSFER_COMPLETED"!==(null===(e=d.data)||void 0===e?void 0:e.status)||(m.current=!0,(0,Me.V)(a))}),[d.data,a]),(0,s.useEffect)((()=>{var t;"CRYPTO_SWAP_REQUIRED"===(null===(t=d.data)||void 0===t?void 0:t.status)&&e.onShowSwapFlow(d.data)}),[d.data,e.onShowSwapFlow]),(0,o.jsxs)(A.mc,{p:"lg",children:[(0,o.jsx)(A.rQ,{title:e.title,onBack:e.onBack}),e.hasTwoSteps&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(F.h,{y:"lg"}),(0,o.jsx)(Ne.g,{steps:2,currentStep:1}),(0,o.jsx)(F.h,{y:"sm"}),(0,o.jsxs)(K.E,{size:"xs",children:["Step 1 of 2 - Buying ",e.quote.onRampToken.token.symbol," with"," ",e.quote.fromCurrencyWithFees.currencySymbol]})]}),(0,o.jsx)(Ue,{uiStatus:u,onDone:e.onDone,fiatStatus:d.data,client:e.client,transactionMode:e.transactionMode,quote:e.quote,isEmbed:e.isEmbed})]})}function Ue(e){const{uiStatus:t}=e,n=e.fiatStatus?(0,_e.A)(e.fiatStatus):void 0,s=e.fiatStatus&&"NOT_FOUND"!==e.fiatStatus.status?e.fiatStatus:void 0,r=e.quote.onRampToken,a=(0,o.jsx)(He.i,{client:e.client,token:null!==s&&void 0!==s&&s.source?{chainId:s.source.token.chainId,address:s.source.token.tokenAddress,symbol:s.source.token.symbol||"",amount:s.source.amount}:{chainId:r.token.chainId,address:r.token.tokenAddress,symbol:r.token.symbol,amount:r.amount},fiat:{amount:e.quote.fromCurrencyWithFees.amount,currencySymbol:e.quote.fromCurrencyWithFees.currencySymbol},statusMeta:null!==s&&void 0!==s&&s.source&&n?{color:null===n||void 0===n?void 0:n.color,text:null===n||void 0===n?void 0:n.status,txHash:s.source.transactionHash}:void 0});return(0,o.jsxs)(A.mc,{children:[(0,o.jsx)(F.h,{y:"xl"}),"loading"===t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(F.h,{y:"md"}),(0,o.jsx)(A.mc,{flex:"row",center:"x",children:(0,o.jsx)(D.y,{size:"xxl",color:"accentText"})}),(0,o.jsx)(F.h,{y:"md"}),(0,o.jsx)(K.E,{color:"primaryText",size:"lg",center:!0,children:"Buy Pending"}),(0,o.jsx)(F.h,{y:"sm"}),!(0,Ke.Fr)()&&(0,o.jsx)(K.E,{center:!0,children:"Complete the purchase in popup"}),(0,o.jsx)(F.h,{y:"xxl"}),a]}),"failed"===t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(F.h,{y:"md"}),(0,o.jsx)(A.mc,{flex:"row",center:"x",children:(0,o.jsx)(qe.g,{size:d.RK["3xl"]})}),(0,o.jsx)(F.h,{y:"lg"}),(0,o.jsx)(K.E,{color:"primaryText",size:"lg",center:!0,children:"Transaction Failed"}),(0,o.jsx)(F.h,{y:"xxl"}),a]}),"completed"===t&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(F.h,{y:"md"}),(0,o.jsx)(A.mc,{flex:"row",center:"x",color:"success",children:(0,o.jsx)(i.KaV,{width:d.RK["3xl"],height:d.RK["3xl"]})}),(0,o.jsx)(F.h,{y:"md"}),(0,o.jsx)(K.E,{color:"primaryText",size:"lg",center:!0,children:"Buy Complete"}),e.fiatStatus&&"NOT_FOUND"!==e.fiatStatus.status&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(F.h,{y:"xxl"}),a,(0,o.jsx)(F.h,{y:"sm"})]}),!e.isEmbed&&(0,o.jsx)(R.$n,{variant:"accent",fullWidth:!0,onClick:e.onDone,children:e.transactionMode?"Continue Transaction":"Done"})]})]})}var Ve=n(76792),Ge=n(49927);function Qe(e){const t=c(e.quote),[n,i]=(0,s.useState)(t?{id:"step-1"}:{id:"onramp-status"}),[r,a]=(0,s.useState)(e.openedWindow),l=(0,s.useCallback)((()=>{(0,Oe.H)({intentId:e.quote.intentId,client:e.client}).then((t=>{e.onSuccess(t)}))}),[e.onSuccess,e.quote.intentId,e.client]);return"step-1"===n.id?(0,o.jsx)(Ve.Y,{title:e.title,client:e.client,onBack:e.onBack,partialQuote:(0,Ve.z)(e.quote),step:1,onContinue:()=>{const t=Fe(e.quote.onRampLink,e.theme);(0,De.b)({type:"fiat",intentId:e.quote.intentId}),a(t),i({id:"onramp-status"})}}):"onramp-status"===n.id?(0,o.jsx)(Ye,{title:e.title,client:e.client,intentId:e.quote.intentId,onBack:e.onBack,hasTwoSteps:t,openedWindow:r,quote:e.quote,onDone:e.onDone,onShowSwapFlow:e=>{i({id:"postonramp-swap",data:e})},transactionMode:e.transactionMode,isEmbed:e.isEmbed,onSuccess:e.onSuccess}):"postonramp-swap"===n.id?(0,o.jsx)(Ge.n,{title:e.title,status:n.data,quote:(0,Ve.z)(e.quote),client:e.client,onBack:e.onBack,onDone:e.onDone,onSwapFlowStarted:()=>{},transactionMode:e.transactionMode,isEmbed:e.isEmbed,payer:e.payer,onSuccess:l}):null}const $e=(0,ue.xH)({id:137,name:"Polygon",nativeCurrency:{name:"MATIC",symbol:"MATIC",decimals:18},blockExplorers:[{name:"PolygonScan",url:"https://polygonscan.com",apiUrl:"https://api.polygonscan.com/api"}]});var Ze=n(96130),Je=n(49193);var Xe=n(72033);function et(e){const{name:t}=(0,Q.Kj)(e.chain);return(0,o.jsxs)(A.mc,{children:[(0,o.jsx)("div",{onClick:e=>{var t;null===(t=e.currentTarget.querySelector("input"))||void 0===t||t.focus()},children:(0,o.jsxs)(A.mc,{flex:"row",center:"both",gap:"xs",style:{flexWrap:"nowrap"},children:[(0,o.jsx)(Xe.pd,{variant:"outline",pattern:"^[0-9]*[.,]?[0-9]*$",inputMode:"decimal",tabIndex:-1,placeholder:"0",type:"text","data-placeholder":""===e.value,value:e.value||"0",disabled:e.freezeAmount,onClick:t=>{""===e.value&&t.currentTarget.setSelectionRange(t.currentTarget.value.length,t.currentTarget.value.length)},onChange:t=>{let n=t.target.value;n.startsWith(".")&&(n="0".concat(n));const o=Number(n);Number.isNaN(o)||(n.startsWith("0")&&!n.startsWith("0.")?e.onChange(n.slice(1)):e.onChange(n))},style:{border:"none",fontSize:(n=e.value,n.length>10?"26px":n.length>6?"34px":"50px"),boxShadow:"none",borderRadius:"0",padding:"0",paddingBlock:"2px",fontWeight:600,textAlign:"right",width:(()=>{let t=e.value.replace(".","").length;return e.value.includes(".")&&(t+=.3),"calc(".concat("".concat(Math.max(1,t),"ch")," + 6px)")})(),maxWidth:"calc(100% - 100px)"}}),(0,o.jsx)(L.C,{token:e.token,chain:e.chain,size:"lg",color:"secondaryText"})]})}),!e.hideTokenSelector&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(F.h,{y:"sm"}),(0,o.jsx)(A.mc,{flex:"row",center:"x",children:(0,o.jsxs)(tt,{variant:"secondary",fullWidth:!0,style:{fontSize:d.J.sm},gap:"xxs",onClick:e.onSelectToken,disabled:e.freezeChainAndToken,children:[(0,o.jsxs)(A.mc,{flex:"row",center:"y",gap:"sm",children:[(0,o.jsx)(ee.x,{token:e.token,chain:e.chain,size:"md",client:e.client}),(0,o.jsxs)(A.mc,{flex:"column",style:{gap:"4px"},children:[(0,o.jsx)(L.C,{token:e.token,chain:e.chain,size:"sm"}),t?(0,o.jsx)(K.E,{size:"xs",color:"secondaryText",children:t}):(0,o.jsx)(oe.E,{width:"90px",height:d.J.xs})]})]}),(0,o.jsx)(i.D3D,{width:d.RK.sm,height:d.RK.sm,style:{marginLeft:"auto"}})]})})]})]});var n}const tt=(0,ce.A)(R.$n)((()=>{const e=(0,k.QP)();return{background:e.colors.tertiaryBg,border:"1px solid ".concat(e.colors.borderColor),justifyContent:"flex-start",transition:"background 0.3s",padding:d.YK.sm}}));var nt=n(64887);const ot=e=>(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 18 18",width:e.size,height:e.size,role:"presentation",children:(0,o.jsx)("path",{fill:"currentColor",d:"M15.6 4.6H1.85v-.55l12.1-.968v.968h1.65V2.4c0-1.21-.98-2.059-2.177-1.888L2.378 2.089C1.18 2.26.2 3.39.2 4.6v11a2.2 2.2 0 002.2 2.2h13.2a2.2 2.2 0 002.2-2.2V6.8a2.2 2.2 0 00-2.2-2.2zm-1.65 7.707a1.65 1.65 0 01-.63-3.176 1.65 1.65 0 11.63 3.176z"})});var it=n(27621);function st(e){const{name:t}=(0,Q.Kj)(e.chain),n=(0,u.X)({address:e.payerAccount.address,chain:e.chain,tokenAddress:(0,Y.r)(e.token)?void 0:e.token.address,client:e.client});return(0,o.jsxs)(A.mc,{bg:"tertiaryBg",borderColor:"borderColor",flex:"row",style:{borderWidth:"1px",borderTopWidth:0,borderStyle:"solid",flexWrap:"nowrap",justifyContent:"space-between",minHeight:"64px",alignItems:"center",...e.swapRequired?{borderBottom:"none"}:{borderBottomLeftRadius:d.r8.md,borderBottomRightRadius:d.r8.md}},children:[(0,o.jsxs)(R.$n,{variant:"ghost",onClick:e.onSelectToken,gap:"sm",style:{paddingInline:d.YK.sm,paddingBlock:d.YK.sm,minWidth:"50%",justifyContent:"flex-start"},disabled:e.freezeChainAndTokenSelection,children:[(0,o.jsx)(ae.f,{token:e.token,chain:e.chain,size:"md",client:e.client}),(0,o.jsxs)(A.mc,{flex:"column",gap:"3xs",children:[(0,o.jsxs)(A.mc,{flex:"row",gap:"xs",center:"y",color:"primaryText",children:[(0,o.jsx)(L.C,{token:e.token,chain:e.chain,size:"sm"}),(0,o.jsx)(i.D3D,{width:d.RK.sm,height:d.RK.sm})]}),t?(0,o.jsx)(K.E,{size:"xs",children:t}):(0,o.jsx)(oe.E,{width:"90px",height:d.J.xs})]})]}),(0,o.jsxs)("div",{style:{flexGrow:1,flexShrink:1,display:"flex",flexDirection:"column",alignItems:"flex-end",gap:d.YK.xxs,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",justifyContent:"center",paddingRight:d.YK.sm},children:[e.isLoading?(0,o.jsx)(oe.E,{width:"120px",height:d.J.md,color:"borderColor"}):(0,o.jsx)(K.E,{size:"md",color:e.value?"primaryText":"secondaryText",style:{},children:(0,l.Z)(Number(e.value),6)||""}),(0,o.jsxs)(A.mc,{flex:"row",gap:"xxs",center:"y",color:"secondaryText",children:[(0,o.jsx)(ot,{size:d.J.xs}),n.data?(0,o.jsx)(K.E,{size:"xs",color:"secondaryText",weight:500,children:(0,it.j)(n.data,!1)}):(0,o.jsx)(oe.E,{width:"70px",height:d.J.xs})]})]})]})}var rt=n(23389),at=n(14250),ct=n(96223),lt=n(15626);var dt=n(21300),ut=n(34267),ht=n(59724),mt=n(67503);function xt(e){const{title:t,onBack:n,receiverAddress:a,client:c,payer:l,onDone:u,chain:h,token:m,tokenAmount:x,transactionMode:p}=e,[y,f]=(0,s.useState)("transfer"),[j,v]=(0,s.useState)("idle"),{symbol:g}=(0,Q.ps)(h);return(0,o.jsxs)(A.mc,{p:"lg",children:[(0,o.jsx)(A.rQ,{title:t,onBack:n}),(0,o.jsx)(F.h,{y:"xl"}),p&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Ne.g,{steps:2,currentStep:"transfer"===y?1:2}),(0,o.jsx)(F.h,{y:"sm"}),(0,o.jsx)(K.E,{size:"sm",children:"transfer"===y?"Step 1 of 2 - Transfer funds":"Step 2 of 2 - Finalize transaction"}),(0,o.jsx)(F.h,{y:"xl"})]}),(0,o.jsxs)(A.mc,{flex:"row",center:"y",style:{justifyContent:"space-between"},children:[(0,o.jsx)(K.E,{size:"sm",children:"From"}),(0,o.jsx)(ze,{address:l.account.address,client:c})]}),(0,o.jsx)(F.h,{y:"md"}),(0,o.jsx)(A.N1,{}),(0,o.jsx)(F.h,{y:"md"}),(0,o.jsxs)(A.mc,{flex:"row",center:"y",style:{justifyContent:"space-between"},children:[(0,o.jsx)(K.E,{size:"sm",children:"To"}),(0,o.jsx)(ze,{address:a,client:c})]}),(0,o.jsx)(F.h,{y:"md"}),(0,o.jsx)(A.N1,{}),(0,o.jsx)(F.h,{y:"md"}),(0,o.jsx)(ht.k,{chainId:h.id,client:c,label:"Amount",tokenAmount:x,tokenSymbol:(0,Y.r)(m)?g||"":m.symbol,tokenAddress:(0,Y.r)(m)?r.DG:m.address}),(0,o.jsx)(F.h,{y:"lg"}),p&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(F.h,{y:"sm"}),(0,o.jsxs)(A.mc,{gap:"sm",flex:"row",style:{justifyContent:"space-between"},center:"y",color:"accentText",children:[(0,o.jsx)(ut.p,{isDone:"execute"===y,isActive:"transfer"===y,label:"transfer"===y?"Transfer":"Done"}),(0,o.jsx)(mt.w,{}),(0,o.jsx)(ut.p,{isDone:!1,label:"Finalize",isActive:"execute"===y})]}),(0,o.jsx)(F.h,{y:"lg"})]}),"error"===j&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(A.mc,{flex:"row",gap:"xs",center:"both",color:"danger",children:[(0,o.jsx)(i._cW,{width:d.RK.sm,height:d.RK.sm}),(0,o.jsx)(K.E,{color:"danger",size:"sm",children:"transfer"===y?"Failed to Transfer":"Failed to Execute"})]}),(0,o.jsx)(F.h,{y:"md"})]}),!p&&"execute"===y&&"done"===j&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(A.mc,{flex:"row",gap:"xs",center:"both",color:"success",children:[(0,o.jsx)(i.KaV,{width:d.RK.sm,height:d.RK.sm}),(0,o.jsx)(K.E,{color:"success",size:"sm",children:"Payment completed"})]}),(0,o.jsx)(F.h,{y:"md"})]}),l.chain.id!==h.id?(0,o.jsx)(P.b,{fullWidth:!0,variant:"accent",switchChain:async()=>{await e.payer.wallet.switchChain(h)}}):(0,o.jsxs)(R.$n,{variant:"accent",fullWidth:!0,disabled:"pending"===j,onClick:async()=>{if("execute"!==y)try{v("pending");const t=(0,Y.r)(m)?(0,dt.prepareTransaction)({client:c,chain:h,to:a,value:(0,G.fq)(x)}):(0,at.k)({contract:(0,U.P)({address:m.address,chain:h,client:c}),to:a,amount:x});await async function(e){const t=await(0,ct.sendTransaction)(e);return(0,lt.L)(t)}({account:e.payer.account,transaction:t}),f("execute"),v(p?"idle":"done")}catch(t){console.error(t),v("error")}else u()},gap:"xs",children:["execute"===y&&("done"===j?"Done":"Continue"),"transfer"===y&&("pending"===j?"Confirming":"Confirm"),"pending"===j&&(0,o.jsx)(D.y,{size:"sm",color:"accentButtonText"})]})]})}function pt(e){var t;const n=(0,k.QP)(),s=(0,Ae.F)(),r=!e.showAllWallets&&(null===(t=e.wallets)||void 0===t?void 0:t.every((e=>s.includes(e))));return(0,o.jsxs)(A.mc,{children:[(0,o.jsxs)(A.mc,{flex:"column",gap:"xs",children:[s.map((t=>{var n;const i=null===(n=t.getAccount())||void 0===n?void 0:n.address;return(0,o.jsx)(Re,{walletId:t.id,client:e.client,address:i||"",onClick:()=>{e.onSelect(t),e.onBack()},disableChevron:!0,checked:!1},t.id)})),!r&&(0,o.jsx)(R.$n,{variant:"secondary",fullWidth:!0,onClick:e.onConnect,gap:"xs",bg:"tertiaryBg",style:{borderRadius:d.r8.lg,border:"1px solid ".concat(n.colors.borderColor),padding:d.YK.sm},children:(0,o.jsxs)(A.mc,{flex:"row",gap:"sm",center:"y",expand:!0,children:[(0,o.jsx)(i.c11,{width:d.RK.md,height:d.RK.md}),(0,o.jsx)(K.E,{size:"sm",color:"primaryText",children:"Add Another Wallet"})]})})]}),(0,o.jsx)(F.h,{y:"sm"})]})}var yt=n(99418);function ft(e){const t=(0,yt.Xw)(e.client);return t.data?(0,o.jsx)(jt,{...e,supportedDestinations:t.data}):(0,o.jsx)(v.x,{})}function jt(e){var t,n,i,a;const{client:c,supportedDestinations:l,connectLocale:d,payOptions:u}=e,h=(0,j.L)(),{payer:m,setPayer:x}=function(){const e=(0,$.z)(),t=(0,j.L)(),n=(0,Ze.w)(),[o,i]=(0,s.useState)();return(0,s.useEffect)((()=>{const e=null===o||void 0===o?void 0:o.wallet;function t(){if(!e)return void i(void 0);const t=e.getAccount(),n=e.getChain();t&&n?(console.log("updated to",t,n),i({account:t,chain:n,wallet:e})):i(void 0)}if(e){const n=e.subscribe("chainChanged",t),o=e.subscribe("accountChanged",t);return()=>{n(),o()}}}),[o]),{payer:o||(t&&n&&e?{account:t,chain:n,wallet:e}:void 0),setPayer:i}}(),[p,y]=(0,s.useState)({id:"main"}),[f,v]=(0,s.useState)(!1),g=(0,s.useCallback)((()=>{y({id:"main"}),e.onDone()}),[e.onDone]),{tokenAmount:w,setTokenAmount:b,toChain:k,setToChain:C,deferredTokenAmount:T,fromChain:S,setFromChain:E,toToken:R,setToToken:z,fromToken:W,setFromToken:B,selectedCurrency:I,setSelectedCurrency:O}=function(e){var t,n,o,i,r,a,c;const l=(0,Ze.w)(),{payOptions:d,supportedDestinations:u}=e,h=null===d||void 0===d?void 0:d.prefillBuy,m=(null===h||void 0===h?void 0:h.amount)||"",[x,p]=(0,s.useState)(m),y=(0,Je.o)(x,300),[f,j]=(0,s.useState)((null===h||void 0===h?void 0:h.chain)||"transaction"===d.mode&&(null===(t=d.transaction)||void 0===t?void 0:t.chain)||"direct_payment"===d.mode&&(null===(n=d.paymentInfo)||void 0===n?void 0:n.chain)||(null===(o=u.find((e=>e.chain.id===(null===l||void 0===l?void 0:l.id))))||void 0===o?void 0:o.chain)||$e),[v,g]=(0,s.useState)((null===h||void 0===h?void 0:h.token)||"direct_payment"===d.mode&&d.paymentInfo.token||Y.g),[w,b]=(0,s.useState)(!1!==d.buyWithCrypto&&(null===(i=d.buyWithCrypto)||void 0===i||null===(i=i.prefillSource)||void 0===i?void 0:i.chain)||"transaction"===d.mode&&(null===(r=d.transaction)||void 0===r?void 0:r.chain)||"direct_payment"===d.mode&&(null===(a=d.paymentInfo)||void 0===a?void 0:a.chain)||$e),[k,C]=(0,s.useState)(!1!==d.buyWithCrypto&&(null===(c=d.buyWithCrypto)||void 0===c||null===(c=c.prefillSource)||void 0===c?void 0:c.token)||"direct_payment"===d.mode&&d.paymentInfo.token||Y.g),[T,S]=(0,s.useState)(We._O);return{tokenAmount:x,setTokenAmount:p,toChain:f,setToChain:j,deferredTokenAmount:y,fromChain:w,setFromChain:b,toToken:v,setToToken:g,fromToken:k,setFromToken:C,selectedCurrency:T,setSelectedCurrency:S}}({payOptions:u,supportedDestinations:l}),F=(0,yt.mC)({client:e.client,destinationChainId:k.id,destinationTokenAddress:(0,Y.r)(R)?r.DG:R.address}),D=(0,s.useMemo)((()=>Tt(l,u,e.supportedTokens)),[e.supportedTokens,l,u]),P=(0,s.useMemo)((()=>{if(F.data)return Tt(F.data,u,e.supportedTokens)}),[e.supportedTokens,F.data,u]),K=function(e){const{payOptions:t,supportedDestinations:n,toChain:o,toToken:i}=e,{fiat:s,swap:a}=function(){const e=n.find((e=>e.chain.id===o.id));if(!e)return{fiat:!1,swap:!1};const t=(0,Y.r)(i)?r.DG:i.address,s=e.tokens.find((e=>e.address.toLowerCase()===t.toLowerCase()));return s?{fiat:s.buyWithFiatEnabled,swap:s.buyWithCryptoEnabled}:{fiat:!0,swap:!0}}(),c=!1!==t.buyWithFiat&&s,l=!1!==t.buyWithCrypto&&a;return{buyWithFiatEnabled:c,buyWithCryptoEnabled:l,showPaymentSelection:c&&l}}({payOptions:e.payOptions,supportedDestinations:e.supportedDestinations,toChain:k,toToken:R}),L=!1===K.showPaymentSelection&&!1===K.buyWithCryptoEnabled&&!1===K.buyWithFiatEnabled,M=(0,s.useCallback)((t=>{var n,o;null===(n=(o=e.payOptions).onPurchaseSuccess)||void 0===n||n.call(o,{type:"crypto",status:t})}),[e.payOptions.onPurchaseSuccess]),N=(0,s.useCallback)((t=>{var n,o;null===(n=(o=e.payOptions).onPurchaseSuccess)||void 0===n||n.call(o,{type:"fiat",status:t})}),[e.payOptions.onPurchaseSuccess]);var q,U,V,G,Q,Z,J,X,ee,te;if("connect-payer-wallet"===p.id)return(0,o.jsx)(H.r,{accountAbstraction:null===(q=e.connectOptions)||void 0===q?void 0:q.accountAbstraction,appMetadata:null===(U=e.connectOptions)||void 0===U?void 0:U.appMetadata,chain:null===(V=e.connectOptions)||void 0===V?void 0:V.chain,chains:null===(G=e.connectOptions)||void 0===G?void 0:G.chains,client:e.client,connectLocale:e.connectLocale,isEmbed:e.isEmbed,onBack:()=>y(p.backScreen),onSelect:e=>{const t=e.getAccount(),n=e.getChain();e&&t&&n&&x({account:t,chain:n,wallet:e})},recommendedWallets:null===(Q=e.connectOptions)||void 0===Q?void 0:Q.recommendedWallets,showAllWallets:void 0===(null===(Z=e.connectOptions)||void 0===Z?void 0:Z.showAllWallets)||(null===(J=e.connectOptions)||void 0===J?void 0:J.showAllWallets),walletConnect:null===(X=e.connectOptions)||void 0===X?void 0:X.walletConnect,wallets:null===(ee=e.connectOptions)||void 0===ee?void 0:ee.wallets});if("swap-flow"===p.id&&m)return(0,o.jsx)(rt.K,{title:e.title,transactionMode:"transaction"===u.mode,isEmbed:e.isEmbed,client:c,onBack:()=>{y({id:"buy-with-crypto"})},buyWithCryptoQuote:p.quote,payer:m,isFiatFlow:!1,onDone:g,onTryAgain:()=>{y({id:"buy-with-crypto"})},onSuccess:M});if("fiat-flow"===p.id&&m)return(0,o.jsx)(Qe,{title:e.title,transactionMode:"transaction"===u.mode,quote:p.quote,onBack:()=>{y({id:"buy-with-fiat"})},client:c,testMode:!1!==e.payOptions.buyWithFiat&&!0===(null===(te=e.payOptions.buyWithFiat)||void 0===te?void 0:te.testMode),theme:"string"===typeof e.theme?e.theme:e.theme.type,openedWindow:p.openedWindow,onDone:g,isEmbed:e.isEmbed,payer:m,onSuccess:N});if("transfer-flow"===p.id&&m&&h){var ne;const t=()=>y({id:"buy-with-crypto"}),n=(null===(ne=e.payOptions)||void 0===ne||null===(ne=ne.paymentInfo)||void 0===ne?void 0:ne.sellerAddress)||h.address;return(0,o.jsx)(xt,{title:e.title,onBack:t,payer:m,client:e.client,onDone:g,chain:k,token:R,tokenAmount:w,receiverAddress:n,transactionMode:"transaction"===e.payOptions.mode})}if("select-currency"===p.id){const e=()=>y(p.backScreen);return(0,o.jsx)(Be,{onSelect:t=>{e(),O(t)},onBack:e})}if("select-to-token"===p.id){var oe;const t=l.map((e=>e.chain)),n=()=>y(p.backScreen),i=null===u||void 0===u||null===(oe=u.prefillBuy)||void 0===oe?void 0:oe.allowEdits;return!1===(null===i||void 0===i?void 0:i.token)?(0,o.jsx)(St,{chains:t,client:e.client,connectLocale:e.connectLocale,setChain:C,goBack:n}):(0,o.jsx)(_.T,{onBack:n,tokenList:((null!==k&&void 0!==k&&k.id?D[k.id]:void 0)||[]).filter((e=>e.address!==r.DG)),onTokenSelect:e=>{z(e),n()},chain:k,chainSelection:!1!==(null===i||void 0===i?void 0:i.chain)?{chains:t,select:e=>{C(e)}}:void 0,connectLocale:d,client:c,modalTitle:e.title})}if("select-from-token"===p.id&&F.data&&P){var ie,se;const t=F.data.map((e=>e.chain)),n=()=>y(p.backScreen);return!1!==u.buyWithCrypto&&!1===(null===(ie=u.buyWithCrypto)||void 0===ie||null===(ie=ie.prefillSource)||void 0===ie||null===(ie=ie.allowEdits)||void 0===ie?void 0:ie.token)?(0,o.jsx)(St,{chains:t,client:e.client,connectLocale:e.connectLocale,setChain:E,goBack:n}):(0,o.jsx)(_.T,{onBack:n,tokenList:((null!==S&&void 0!==S&&S.id?P[S.id]:void 0)||[]).filter((e=>e.address!==r.DG)),onTokenSelect:e=>{B(e),n()},chain:S,chainSelection:!1!==u.buyWithCrypto&&!1!==(null===(se=u.buyWithCrypto)||void 0===se||null===(se=se.prefillSource)||void 0===se||null===(se=se.allowEdits)||void 0===se?void 0:se.chain)?{chains:F.data.map((e=>e.chain)),select:e=>E(e)}:void 0,connectLocale:d,client:c,modalTitle:"Pay with"})}return(0,o.jsx)(A.mc,{animate:"fadein",children:(0,o.jsxs)("div",{children:["main"===p.id&&(0,o.jsx)(gt,{title:e.title,payerAccount:null===m||void 0===m?void 0:m.account,client:c,onSelectBuyToken:()=>y({id:"select-to-token",backScreen:p}),payOptions:u,setTokenAmount:b,setToChain:C,setToToken:z,setFromChain:E,setFromToken:B,toChain:k,toToken:R,tokenAmount:w,connectOptions:e.connectOptions,setScreen:y,supportedDestinations:l,onBack:e.onBack,theme:e.theme,hasEditedAmount:f,setHasEditedAmount:v,enabledPaymentMethods:K}),("select-payment-method"===p.id||"select-wallet"===p.id||"buy-with-crypto"===p.id||"buy-with-fiat"===p.id)&&m&&(0,o.jsxs)(wt,{title:e.title,selectedChain:k,selectedToken:R,tokenAmount:w,client:c,onBack:()=>{!K.showPaymentSelection||"select-wallet"!==p.id&&"buy-with-fiat"!==p.id?"buy-with-crypto"===p.id?y({id:"select-wallet"}):y({id:"main"}):y({id:"select-payment-method"})},children:["select-payment-method"===p.id&&(0,o.jsx)(bt,{setScreen:e=>y({id:e})}),"select-wallet"===p.id&&(0,o.jsx)(pt,{client:c,onSelect:e=>{const t=e.getChain(),n=e.getAccount();t&&n&&(x({account:n,chain:t,wallet:e}),y({id:"buy-with-crypto"}))},showAllWallets:!(null===(t=e.connectOptions)||void 0===t||!t.showAllWallets),wallets:null===(n=e.connectOptions)||void 0===n?void 0:n.wallets,onBack:()=>{},onConnect:()=>{y({id:"connect-payer-wallet",backScreen:{id:"select-wallet"}})},selectedAddress:m.account.address}),"buy-with-crypto"===p.id&&h&&(0,o.jsx)(kt,{setScreen:y,tokenAmount:T,toChain:k,toToken:R,fromChain:S,fromToken:W,showFromTokenSelector:()=>{y({id:"select-from-token",backScreen:p})},payer:m,client:c,isEmbed:e.isEmbed,onDone:g,payOptions:u,connectLocale:d,connectOptions:e.connectOptions,setPayer:x,activeAccount:h,setTokenAmount:b,setHasEditedAmount:v,disableTokenSelection:!0===L||!1!==u.buyWithCrypto&&!1===(null===(i=u.buyWithCrypto)||void 0===i||null===(i=i.prefillSource)||void 0===i||null===(i=i.allowEdits)||void 0===i?void 0:i.chain)&&!1===(null===(a=u.buyWithCrypto)||void 0===a||null===(a=a.prefillSource)||void 0===a||null===(a=a.allowEdits)||void 0===a?void 0:a.token)}),"buy-with-fiat"===p.id&&(0,o.jsx)(Ct,{setScreen:y,tokenAmount:T,toChain:k,toToken:R,selectedCurrency:I,client:c,isEmbed:e.isEmbed,onDone:g,payOptions:u,theme:e.theme,showCurrencySelector:()=>{y({id:"select-currency",backScreen:p})},payer:m,setTokenAmount:b,setHasEditedAmount:v})]})]})})}function vt(e){return(0,o.jsx)("div",{children:(0,o.jsxs)(A.mc,{flex:"row",gap:"sm",center:"y",style:{justifyContent:"space-between"},children:[(0,o.jsxs)(A.mc,{flex:"row",gap:"xs",center:"y",children:[(0,o.jsx)(K.E,{color:"primaryText","data-testid":"tokenAmount",size:"xl",children:(0,l.Z)(Number(e.tokenAmount),6)}),(0,o.jsxs)(A.mc,{flex:"row",gap:"xxs",center:"y",children:[(0,o.jsx)(L.C,{token:e.selectedToken,chain:e.selectedChain,size:"md",color:"secondaryText"}),(0,o.jsx)(ae.f,{chain:e.selectedChain,client:e.client,size:"sm",token:e.selectedToken})]})]}),(0,o.jsx)(g.R,{chain:e.selectedChain,client:e.client,size:"sm",short:!0})]})})}function gt(e){const{setTokenAmount:t,setToChain:n,setToToken:i,setFromChain:s,setFromToken:r,payerAccount:a,client:c,tokenAmount:l,payOptions:d,toToken:u,toChain:h,supportedDestinations:m,enabledPaymentMethods:x}=e,{showPaymentSelection:p,buyWithCryptoEnabled:y,buyWithFiatEnabled:f}=x,j=!l;switch(d.mode){case"transaction":return(0,o.jsx)(Ee,{supportedDestinations:m,payUiOptions:d,payerAccount:a,connectOptions:e.connectOptions,client:c,onContinue:(o,a,c)=>{t(o),n(a),s(a),r(c),i(c),p?e.setScreen({id:"select-payment-method"}):y?e.setScreen({id:"select-wallet"}):f?e.setScreen({id:"buy-with-fiat"}):e.setScreen({id:"select-wallet"})}});case"direct_payment":return(0,o.jsx)(ne,{client:c,payUiOptions:d,payerAccount:a,connectOptions:e.connectOptions,supportedDestinations:m,onContinue:(o,a,c)=>{t(o),n(a),s(a),r(c),i(c),p?e.setScreen({id:"select-payment-method"}):y?e.setScreen({id:"buy-with-crypto"}):f?e.setScreen({id:"buy-with-fiat"}):e.setScreen({id:"select-wallet"})}});default:var v,g,w;return(0,o.jsxs)(A.mc,{p:"lg",children:[(0,o.jsx)(A.rQ,{title:e.title,onBack:e.onBack}),(0,o.jsx)(F.h,{y:"xl"}),(0,o.jsx)(et,{value:l,onChange:async n=>{e.setHasEditedAmount(!0),t(n)},freezeAmount:!1===(null===(v=d.prefillBuy)||void 0===v||null===(v=v.allowEdits)||void 0===v?void 0:v.amount),freezeChainAndToken:!1===(null===(g=d.prefillBuy)||void 0===g||null===(g=g.allowEdits)||void 0===g?void 0:g.chain)&&!1===(null===(w=d.prefillBuy)||void 0===w||null===(w=w.allowEdits)||void 0===w?void 0:w.token),token:u,chain:h,onSelectToken:e.onSelectBuyToken,client:e.client}),(0,o.jsx)(F.h,{y:"xl"}),(0,o.jsx)(A.mc,{flex:"column",gap:"sm",children:a?(0,o.jsx)(R.$n,{variant:"accent",fullWidth:!0,disabled:j,"data-disabled":j,onClick:()=>{p?e.setScreen({id:"select-payment-method"}):y?e.setScreen({id:"buy-with-crypto"}):f?e.setScreen({id:"buy-with-fiat"}):console.error("No payment method enabled")},children:"Continue"}):(0,o.jsx)("div",{children:(0,o.jsx)(M.p,{...e.connectOptions,client:e.client,theme:e.theme,connectButton:{style:{width:"100%"}}})})})]})}}function wt(e){return(0,o.jsxs)(A.mc,{children:[(0,o.jsx)(A.mc,{p:"lg",children:(0,o.jsx)(A.rQ,{title:e.title,onBack:e.onBack})}),(0,o.jsxs)(A.mc,{px:"lg",style:{paddingBottom:d.YK.lg},children:[(0,o.jsx)(F.h,{y:"xs"}),(0,o.jsx)(vt,{selectedToken:e.selectedToken,selectedChain:e.selectedChain,tokenAmount:e.tokenAmount,client:e.client}),(0,o.jsx)(F.h,{y:"md"}),(0,o.jsx)(A.N1,{}),(0,o.jsx)(F.h,{y:"lg"}),(0,o.jsx)(K.E,{size:"sm",children:" Pay with "}),(0,o.jsx)(F.h,{y:"sm"}),e.children]})]})}function bt(e){return(0,o.jsx)(A.mc,{animate:"fadein",children:(0,o.jsxs)(A.mc,{flex:"column",gap:"sm",children:[(0,o.jsxs)(R.$n,{variant:"outline",bg:"tertiaryBg",onClick:()=>e.setScreen("buy-with-fiat"),gap:"sm",style:{justifyContent:"flex-start",textAlign:"left"},children:[(0,o.jsx)(A.mc,{color:"secondaryText",flex:"row",center:"both",children:(0,o.jsx)(i.HyM,{style:{width:d.RK.md,height:d.RK.md}})}),(0,o.jsxs)(A.mc,{flex:"column",gap:"xxs",children:[(0,o.jsx)(K.E,{size:"md",color:"primaryText",children:"Credit Card"}),(0,o.jsx)(K.E,{size:"xs",children:"Securely pay with credit card"})]})]}),(0,o.jsxs)(R.$n,{variant:"outline",bg:"tertiaryBg",onClick:()=>e.setScreen("select-wallet"),style:{justifyContent:"flex-start"},gap:"sm",children:[(0,o.jsx)(A.mc,{color:"secondaryText",flex:"row",center:"both",children:(0,o.jsx)(q.g,{size:d.RK.md})}),(0,o.jsxs)(A.mc,{flex:"column",gap:"xxs",children:[(0,o.jsx)(K.E,{size:"md",color:"primaryText",children:"Crypto"}),(0,o.jsx)(K.E,{size:"xs",children:"Pay with your connected wallet"})]})]})]})})}function kt(e){var t,n,i,a;const{setScreen:c,payer:d,client:x,toChain:p,tokenAmount:y,toToken:f,fromChain:j,fromToken:v,showFromTokenSelector:g,payOptions:w,disableTokenSelection:b}=e,k=(null===(t=e.payOptions)||void 0===t||null===(t=t.paymentInfo)||void 0===t?void 0:t.sellerAddress)||e.activeAccount.address,{drawerRef:C,drawerOverlayRef:T,isOpen:S,setIsOpen:E}=O(),[W,B]=(0,s.useState)("fees"),M=(0,u.X)({address:d.account.address,chain:j,tokenAddress:(0,Y.r)(v)?void 0:v.address,client:x}),N=(0,Y.r)(v)?r.DG:v.address.toLowerCase(),q=(0,Y.r)(f)?r.DG:f.address.toLowerCase(),_=!!y&&!(j.id===p.id&&N===q),H=_?{fromAddress:d.account.address,toAddress:k,fromChainId:j.id,fromTokenAddress:(0,Y.r)(v)?r.DG:v.address,toChainId:p.id,toTokenAddress:(0,Y.r)(f)?r.DG:f.address,toAmount:y,client:x,purchaseData:w.purchaseData}:void 0,U=(V=H,G={staleTime:3e4,refetchInterval:3e4,gcTime:3e4},(0,h.I)({...G,queryKey:["buyWithCryptoQuote",V],queryFn:()=>{if(!V)throw new Error("Swap params are required");return(0,m.c)(V)},enabled:!!V,retry(e,t){if(e>3)return!1;try{if("MINIMUM_PURCHASE_AMOUNT"===t.error.code)return!1}catch{return!0}return!0}}));var V,G;const Q=_?null===(n=U.data)||void 0===n?void 0:n.swapDetails.fromAmount:y,$=!!Q&&!!M.data&&Number(M.data.displayValue)<Number(Q),Z=_&&!U.data||$,J=e.payer.chain.id!==j.id;const X=!U.isLoading&&U.error?function(e){try{if("MINIMUM_PURCHASE_AMOUNT"===e.error.code){const t=e.error.data.minimumAmountEth;return{minAmount:(0,l.Z)(Number(t),6)}}}catch{}return{msg:["Unable to get price quote"]}}(U.error):void 0;return(0,o.jsxs)(A.mc,{flex:"column",gap:"md",animate:"fadein",children:[S&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(I,{ref:T}),(0,o.jsx)(z,{ref:C,close:()=>E(!1),children:"fees"===W&&U.data&&(0,o.jsxs)("div",{children:[(0,o.jsx)(K.E,{size:"lg",color:"primaryText",children:"Fees"}),(0,o.jsx)(F.h,{y:"lg"}),(0,o.jsx)(nt.h,{quote:U.data,align:"left"})]})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(Re,{client:e.client,onClick:()=>{c({id:"select-wallet"})},address:e.payer.account.address,walletId:e.payer.wallet.id,containerStyle:{borderBottomRightRadius:0,borderBottomLeftRadius:0}}),(0,o.jsx)(st,{value:Q||"",onSelectToken:g,chain:j,token:v,isLoading:U.isLoading&&!Q,client:x,freezeChainAndTokenSelection:b,payerAccount:e.payer.account,swapRequired:_}),_&&(0,o.jsx)(se,{quoteIsLoading:U.isLoading,estimatedSeconds:null===(i=U.data)||void 0===i?void 0:i.swapDetails.estimated.durationSeconds,onViewFees:function(){U.data&&(E(!0),B("fees"))}}),(0,o.jsx)(F.h,{y:"md"})]}),X&&(0,o.jsxs)("div",{children:[X.minAmount&&(0,o.jsxs)(K.E,{color:"danger",size:"sm",center:!0,multiline:!0,children:["Minimum amount is ",X.minAmount," ",(0,o.jsx)(L.C,{token:f,chain:p,size:"sm",inline:!0,color:"danger"})]}),null===(a=X.msg)||void 0===a?void 0:a.map((e=>(0,o.jsx)(K.E,{color:"danger",size:"sm",center:!0,multiline:!0,children:e},e)))]}),!X&&$&&(0,o.jsxs)("div",{children:[(0,o.jsx)(K.E,{color:"danger",size:"sm",center:!0,multiline:!0,children:"Not enough funds."}),(0,o.jsx)(K.E,{color:"danger",size:"sm",center:!0,multiline:!0,children:"Try a different wallet or token."})]}),null!==X&&void 0!==X&&X.minAmount?(0,o.jsx)(R.$n,{variant:"accent",fullWidth:!0,onClick:()=>{e.setTokenAmount(String(X.minAmount)),e.setHasEditedAmount(!0)},children:"Set Minimum"}):!J||U.isLoading||$||U.error?(0,o.jsx)(R.$n,{variant:Z?"outline":"accent",fullWidth:!0,"data-disabled":Z,disabled:Z,onClick:async()=>{Z||("transaction"!==e.payOptions.mode&&"direct_payment"!==e.payOptions.mode||$||_?U.data&&c({id:"swap-flow",quote:U.data}):d.account.address!==k?c({id:"transfer-flow"}):e.onDone())},gap:"xs",children:U.isLoading?(0,o.jsxs)(o.Fragment,{children:["Getting price quote",(0,o.jsx)(D.y,{size:"sm",color:"accentText"})]}):"Continue"}):(0,o.jsx)(P.b,{variant:"accent",fullWidth:!0,switchChain:async()=>{await e.payer.wallet.switchChain(j)}})]})}function Ct(e){var t,n,i,a;const{toToken:d,tokenAmount:u,payer:h,client:m,setScreen:x,toChain:p,showCurrencySelector:f,selectedCurrency:j}=e,v=(null===(t=e.payOptions)||void 0===t||null===(t=t.paymentInfo)||void 0===t?void 0:t.sellerAddress)||e.payer.account.address,{drawerRef:g,drawerOverlayRef:w,isOpen:b,setIsOpen:k}=O(),[C,T]=(0,s.useState)("fees"),S=e.payOptions.buyWithFiat,E=y(!1!==S&&u?{fromCurrencySymbol:j.shorthand,toChainId:p.id,toAddress:v,toTokenAddress:(0,Y.r)(d)?r.DG:d.address,toAmount:u,client:m,isTestMode:null===S||void 0===S?void 0:S.testMode,purchaseData:e.payOptions.purchaseData,fromAddress:h.account.address}:void 0);const W=!E.data,B=!E.isLoading&&E.error?function(e){try{if("MINIMUM_PURCHASE_AMOUNT"===e.error.code){const t=e.error.data.minimumAmountEth;return{minAmount:(0,l.Z)(Number(t),6)}}}catch{}return{msg:["Unable to get price quote"]}}(E.error):void 0;return(0,o.jsxs)(A.mc,{flex:"column",gap:"md",animate:"fadein",children:[b&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(I,{ref:w}),(0,o.jsx)(z,{ref:g,close:()=>k(!1),children:"fees"===C&&E.data&&(0,o.jsxs)("div",{children:[(0,o.jsx)(K.E,{size:"lg",color:"primaryText",children:"Fees"}),(0,o.jsx)(F.h,{y:"lg"}),(0,o.jsx)(nt.C,{quote:E.data})]})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(le,{isLoading:E.isLoading,value:null===(n=E.data)||void 0===n?void 0:n.fromCurrencyWithFees.amount,client:m,currency:j,onSelectCurrency:f}),(0,o.jsx)(se,{quoteIsLoading:E.isLoading,estimatedSeconds:null===(i=E.data)||void 0===i?void 0:i.estimatedDurationSeconds,onViewFees:function(){E.data&&(T("fees"),k(!0))}}),(0,o.jsx)(F.h,{y:"md"})]}),B&&(0,o.jsxs)("div",{children:[B.minAmount&&(0,o.jsxs)(K.E,{color:"danger",size:"sm",center:!0,multiline:!0,children:["Minimum amount is ",B.minAmount," ",(0,o.jsx)(L.C,{token:d,chain:p,size:"sm",inline:!0,color:"danger"})]}),null===(a=B.msg)||void 0===a?void 0:a.map((e=>(0,o.jsx)(K.E,{color:"danger",size:"sm",center:!0,multiline:!0,children:e},e)))]}),null!==B&&void 0!==B&&B.minAmount?(0,o.jsx)(R.$n,{variant:"accent",fullWidth:!0,onClick:()=>{e.setTokenAmount(String(B.minAmount)),e.setHasEditedAmount(!0)},children:"Set Minimum"}):(0,o.jsx)(R.$n,{variant:W?"outline":"accent","data-disabled":W,disabled:W,fullWidth:!0,onClick:function(){if(!E.data)return;let t=null;c(E.data)||(t=Fe(E.data.onRampLink,"string"===typeof e.theme?e.theme:e.theme.type),(0,De.b)({type:"fiat",intentId:E.data.intentId})),x({id:"fiat-flow",quote:E.data,openedWindow:t})},gap:"xs",children:E.isLoading?(0,o.jsxs)(o.Fragment,{children:["Getting price quote",(0,o.jsx)(D.y,{size:"sm",color:"accentText"})]}):"Continue"})]})}function Tt(e,t,n){const o={},i=!1===t.buyWithFiat,s=!1===t.buyWithCrypto;for(const r of e)o[r.chain.id]=r.tokens.filter((e=>!(!e.buyWithCryptoEnabled||!e.buyWithFiatEnabled)||!(!e.buyWithCryptoEnabled&&i)&&!(!e.buyWithFiatEnabled&&s)));if(n)for(const r in n){const e=Number(r),t=n[e];t&&(o[e]=t)}return o}function St(e){return(0,o.jsx)(N.Hh,{client:e.client,connectLocale:e.connectLocale,showTabs:!1,onBack:e.goBack,chains:e.chains,closeModal:e.goBack,networkSelector:{renderChain:t=>(0,o.jsx)(N.O$,{chain:t.chain,confirming:!1,switchingFailed:!1,onClick:()=>{e.setChain(t.chain),e.goBack()},client:e.client,connectLocale:e.connectLocale})}})}}}]);
//# sourceMappingURL=76471.a93fb127.chunk.js.map